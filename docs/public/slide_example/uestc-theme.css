/* =========================================
   UESTC Theme Style (Do Not Edit Layout Here)
   ========================================= */
:root {
    /* --- 原有颜色配置 (保持不变) --- */
    --uestc-blue: #115EA2;
    --uestc-blue-dark: #0D477A;
    --uestc-grey-bg: #E9E9F3;
    --uestc-red: #cc0000;
    --uestc-green: #2E8B57;
    --header-height: 5.5%; /* 改为容器高度的百分比 */

    /* =========================================
       ★ 新增：字体与字号配置系统
       ========================================= */
    
    /* 1. 字体栈 (Font Stacks) - 英文在前，中文在后 */
    /* 无衬线体 (现代、甚至、适合屏幕阅读) - 默认推荐 */
    --font-sans: "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "WenQuanYi Micro Hei", sans-serif;
    
    /* 衬线体 (正式、传统、类似 Word 文档) */
    --font-serif: "Georgia", "Times New Roman", "Songti SC", "SimSun", serif;
    
    /* 等宽字体 (代码、数据) */
    --font-mono: "Menlo", "Monaco", "Consolas", "Courier New", monospace;

    /* 2. 全局默认字号 (基准) */
    /* 由于你的画布宽 1600px，基准字号建议设大一点，比如 30px 或 32px */
    --text-base-size: 32px;
}

/* 根据 Body Class 自动切换页脚高度 */
body.footer-style-single { --footer-height: 4.5%; }
body.footer-style-double { --footer-height: 8%; }

/* =========================================
   PPT 容器：固定比例显示
   ========================================= */
body { 
    margin: 0;
    padding: 0;
    background-color: #2c3e50; /* 容器外部背景色 */
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    box-sizing: border-box;
}

.ppt-container {
    width: 90vw; /* 容器宽度，可以根据需要调整 */
    max-width: 1600px; /* 最大宽度限制 */
    margin: 20px auto;
}

.ppt-content {
    position: relative;
    width: 100%;
    background-color: #fff;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    overflow: hidden;
}

/* 16:9 比例 */
body[data-aspect-ratio="16:9"] .ppt-content {
    aspect-ratio: 16 / 9;
}

/* 4:3 比例 */
body[data-aspect-ratio="4:3"] .ppt-content {
    aspect-ratio: 4 / 3;
}

/* PPT 内容区域内部样式调整 */
.ppt-content { 
    padding-top: var(--header-height); 
    padding-bottom: var(--footer-height); 
    box-sizing: border-box; 
}

.reveal { 
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; 
    color: #333; 
    height: calc(100% - var(--header-height) - var(--footer-height)) !important; 
    top: calc(var(--header-height) / 2) !important; 
}
.reveal h1, .reveal h2, .reveal h3, .reveal h4 { color: var(--uestc-blue); text-transform: none; font-weight: bold; }

/* =========================================
   顶部导航栏 (一体化 + 底部微渐变风格)
   ========================================= */
#beamer-header { 
    position: absolute; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: var(--header-height); 
    z-index: 20; 
    display: flex; 
    justify-content: space-between; 
    
    /* 字体设置 */
    font-size: clamp(10px, 1.2vw, 14px); 
    color: white; 
    
    /* ★★★ 核心修改 1：整体纯色背景 + 底部微渐变 ★★★ */
    /* 逻辑：0% 到 85% 是纯色(blue-dark)，只有最后 15% 渐变到更深的颜色 */
    background: linear-gradient(to bottom, var(--uestc-blue-dark) 100%, #0D477A 0%);
    
    /* 去掉底边框，让渐变自然收尾 */
    border-bottom: none; 
    /* 加一点外部投影，让导航栏和正文分层 */
    box-shadow: 0 4px 8px rgba(0,0,0,0.1); 
}

.header-section { 
    flex: 1; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center; 
    
    /* ★★★ 核心修改 2：完全透明，无边框 ★★★ */
    background-color: transparent !important; /* 确保不显示任何背景色块 */
    border-right: none; /* 移除竖线分割 */
    cursor: pointer; 
    
    /* 默认状态稍微淡一点，突出层次 */
    opacity: 0.6; 
    transition: opacity 0.3s ease;
}

/* 鼠标悬停只增加不透明度，不改背景 */
.header-section:hover {
    opacity: 0.9;
}

/* ★★★ 核心修改 3：激活状态去除“点击感” ★★★ */
.header-section.active { 
    opacity: 1; /* 仅仅是变亮 */
    background-color: transparent !important; /* 严禁背景变色 */
    
    /* 可选：底部加一个非常柔和的亮条，指示当前位置，像光晕一样 */
    box-shadow: 0 4px 6px -4px rgba(255, 255, 255, 0.8);
    
    font-weight: bold;
    text-shadow: 0 0 10px rgba(255,255,255,0.4); /* 文字加一点发光感 */
}

.header-section-title { 
    margin-bottom: 0.3vh; 
    font-size: 0.85em; 
    white-space: nowrap; 
    overflow: hidden; 
    text-overflow: ellipsis; 
    max-width: 100%; 
    padding: 0 5px; 
}

/* 进度点点样式优化 */
.header-dots { 
    display: flex; 
    height: 0.8vh; 
    min-height: 8px; 
    align-items: flex-end; /* 让点点靠下对齐 */
}

.dot { 
    width: clamp(3px, 0.4vw, 5px); 
    height: clamp(3px, 0.4vw, 5px); 
    margin: 0 0.25vw; 
    background: rgba(255,255,255,0.3); 
    border-radius: 50%; 
    cursor: pointer; 
    transition: all 0.2s;
}

.dot.active { 
    background: #fff; 
    transform: scale(1.4); /* 激活的点稍微大一点 */
    box-shadow: 0 0 4px rgba(255,255,255,0.6); 
}

/* --- 底部页脚系统 --- */
#beamer-footer { position: absolute; bottom: 0; left: 0; width: 100%; z-index: 30; font-family: sans-serif; font-size: clamp(8px, 0.9vw, 10px); color: white; display: flex; flex-direction: column; }
.footer-row { display: flex; justify-content: space-between; align-items: center; padding: 0 1.5vw; width: 100%; box-sizing: border-box; }

/* 单行模式 */
body.footer-style-single #beamer-footer { height: var(--footer-height); background-color: var(--uestc-blue-dark); }
body.footer-style-single .footer-row-upper { display: none; }
body.footer-style-single .footer-row-lower { height: 100%; }
body.footer-style-single .footer-right-container { background-color: var(--uestc-blue); height: 100%; display: flex; align-items: center; padding: 0 1.5vw; margin-right: -1.5vw; }

/* 双行模式 */
body.footer-style-double #beamer-footer { height: var(--footer-height); }
body.footer-style-double .footer-row-upper { height: 50%; background-color: var(--uestc-blue); border-bottom: 1px solid rgba(255,255,255,0.1); }
body.footer-style-double .footer-row-lower { height: 50%; background-color: var(--uestc-blue-dark); }

/* --- 常用积木样式 (Blocks) --- */
.block { border-radius: 8px; margin-bottom: 20px; box-shadow: 3px 3px 6px rgba(0,0,0,0.15); text-align: left; overflow: hidden; }
.block-title { padding: 6px 15px; font-weight: bold; font-size: 0.9em; color: white; }
.block-content { padding: 15px; font-size: 0.9em; line-height: 1.5; }
.block-standard .block-title { background: var(--uestc-blue); } .block-standard .block-content { background: var(--uestc-grey-bg); }
.block-alert .block-title { background: var(--uestc-red); } .block-alert .block-content { background: #ffe6e6; }
.block-example .block-title { background: var(--uestc-green); } .block-example .block-content { background: #eaffea; }

/* --- 标题框 --- */
.title-box { 
    background: var(--uestc-blue); 
    color: white; 
    padding: 30px; 
    border-radius: 12px; 
    box-shadow: 5px 5px 15px rgba(0,0,0,0.3); 
    margin-bottom: 30px; 
    text-align: center; 
}

/* 必须加上这几行，防止文字跟背景撞色 */
.title-box h1, .title-box h2, .title-box h3 { 
    color: white !important; 
    margin: 10px 0;
}
/* --- 布局工具类 (Helper Classes) --- */
.cols-2 { display: flex; gap: 20px; align-items: center; }
.col { flex: 1; }
.text-left { text-align: left; }
.text-center { text-align: center; }
.text-sm { font-size: 0.8em; }
.mt-20 { margin-top: 20px; }
.img-fit { max-width: 100%; height: auto; border-radius: 4px; box-shadow: 2px 2px 5px rgba(0,0,0,0.1); }

/* =========================================
   新增：标题左上角对齐修正
   ========================================= */

/* 1. 让所有幻灯片内容的文字默认左对齐 */
.reveal .slides {
    text-align: left;
}

/* 2. 减少 Reveal.js 默认的左右内边距，消除大片空白 */
.reveal .slides section {
    padding: 3vh 4vw !important; /* 使用视口单位，随容器缩放 */
    box-sizing: border-box;
}

/* 3. 针对每一页的标题 (h3) 进行专门设置 */
/* 注意：我们在 HTML 模板中通常用 h3 作为页标题 */
.reveal h3 {
    text-align: left;       /* 强制左对齐 */
    margin-top: 0;          /* 修正顶部间距 */
    margin-bottom: 2.5vh;   /* 标题和正文之间的距离，使用视口单位 */
    padding-left: 0;        /* 确保左边没有多余留白 */
}

/* 3. 特殊处理：保留【首页/标题页】的居中样式 */
/* 因为我们上面把所有 slides 都改成了左对齐，所以要单独把标题页改回居中 */
.reveal .title-box {
    text-align: center;     /* 标题框内部文字居中 */
    margin-top: 10%;        /* 首页由于没有垂直居中了，需要手动往下推一点，否则会挂在顶上 */
}
.text-center {
    text-align: center !important; /* 确保那些使用了 text-center 类的元素依然居中 */
}

.reveal { 
    /* 使用变量，默认使用无衬线体 */
    font-family: var(--font-sans); 
    
    /* 设置基准字号 */
    font-size: var(--text-base-size); 
    
    /* 优化文字渲染 */
    font-weight: normal;
    color: #333; 
    
    /* 保持原有的布局修正 */
    height: calc(100% - var(--header-height) - var(--footer-height)) !important; 
    top: calc(var(--header-height) / 2) !important; 
}

/* 标题默认字体 (通常标题也可以用衬线体显得更正式，这里默认跟随主字体) */
.reveal h1, .reveal h2, .reveal h3, .reveal h4 { 
    font-family: var(--font-sans); /* 如果想标题用衬线体，改为 var(--font-serif) */
    color: var(--uestc-blue); 
    text-transform: none; 
    font-weight: bold; 
}


/* =========================================
   新增：字体与字号工具类 (Utilities)
   ========================================= */

/* --- 切换字体族 --- */
/* 强制使用衬线体 (适合引用、古诗、正式声明) */
.font-serif { font-family: var(--font-serif) !important; }

/* 强制使用无衬线体 */
.font-sans { font-family: var(--font-sans) !important; }

/* 强制使用代码体 */
.font-mono { font-family: var(--font-mono) !important; }

/* 特殊：楷体 (适合引用、对话) */
.font-kai { font-family: "KaiTi", "STKaiti", "BiauKai", serif !important; }


/* --- 调整字号 (基于 1600px 宽度的比例) --- */
/* 小号说明文字 (约 24px) */
.text-sm { font-size: 0.75em !important; line-height: 1.4; }

/* 默认正文 (约 32px) */
.text-base { font-size: 1.0em !important; line-height: 1.5; }

/* 中号强调 (约 40px) */
.text-lg { font-size: 1.25em !important; line-height: 1.4; }

/* 大号标题 (约 56px) */
.text-xl { font-size: 1.75em !important; font-weight: bold; }

/* 超大号 (用于首页数字或核心关键词) */
.text-huge { font-size: 3.0em !important; font-weight: bold; color: var(--uestc-red); }

/* --- 粗细调整 --- */
.font-light  { font-weight: 300 !important; }
.font-normal { font-weight: 400 !important; }
.font-bold   { font-weight: 700 !important; }

/* =========================================
   特殊页面：强制垂直水平居中 (用于首页、致谢页)
   ========================================= */
.reveal .slides section.slide-center {
    display: flex !important;
    flex-direction: column;     /* 内容垂直排列 */
    justify-content: center;    /* 垂直居中 */
    align-items: center;        /* 水平居中 */
    height: 100%;               /* 占满整个幻灯片高度 */
    text-align: center;         /* 文字居中 */
    padding: 0 !important;      /* 移除内边距干扰 */
}


/* =========================================
   四分栏布局 (2x2 Grid)
   ========================================= */
.grid-2x2 {
    display: grid;
    grid-template-columns: 1fr 1fr; /* 两列等宽 */
    grid-template-rows: auto auto;  /* 两行自动高度 */
    gap: 40px 60px;                 /* 行间距40px，列间距60px */
    width: 100%;
    margin-top: 20px;
}

/* 四分块样式 (仿 LaTeX quarterblock) */
.quarter-block {
    text-align: left; /* 内部文字左对齐 */
}

/* 块标题带下划线 */
.quarter-title {
    font-size: 1.1em;             /* 标题稍大 */
    font-weight: bold;
    color: #333;                  /* 深色文字 */
    border-bottom: 2px solid var(--uestc-blue); /* 核心：蓝色下划线 */
    margin-bottom: 15px;          /* 标题与正文间距 */
    padding-bottom: 5px;          /* 标题文字与线的距离 */
    display: block;               /* 确保占据整行 */
}

/* 块内容文字调整 */
.quarter-content {
    font-size: 0.9em;             /* 正文稍微小一点，显得精致 */
    color: #555;
    line-height: 1.6;
}